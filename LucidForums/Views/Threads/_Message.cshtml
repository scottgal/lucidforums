@model LucidForums.Models.ViewModels.MessageVm
<li id="msg-@Model.Id" class="p-2 border rounded" style="margin-left:@(Model.Depth * 16)px">
    <div class="prose max-w-none">@Html.Raw(System.Net.WebUtility.HtmlEncode(Model.Content).Replace("\n", "<br/>") )</div>
    <div class="text-xs text-gray-500 mt-1 flex items-center gap-2">
        <span>@Model.CreatedAtUtc.ToString("g")</span>
        @if (Model.CharterScore.HasValue)
        {
            <span title="Charter alignment score" class="px-1.5 py-0.5 rounded bg-gray-100 border">Score: @Model.CharterScore.Value.ToString("0")</span>
        }
    </div>
    <button class="btn btn-xs mt-2"
            hx-get="@Url.Action("Reply", "Threads", new { id = ViewContext.RouteData.Values["id"], parentId = Model.Id })"
            hx-target="#reply-form-@Model.Id"
            hx-swap="innerHTML">
        Reply
    </button>
    <div id="reply-form-@Model.Id"></div>
</li>
